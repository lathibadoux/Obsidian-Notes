## Definition
A **nonclustered index** is a database index that stores **a sorted list of key values** _and_ **pointers (row locators)** to where the actual table data is stored.

Think of a non-clustered index like the ***index of a book***.

Unlike a **clustered index**, it does **not** change the physical order of the data in the table — it’s more like a _separate lookup table_.

Base data pages have the row identifier for each value.  Base data pages are **NOT** part of the B-Tree.  The leaf level of the data pages in the non-clustered index are pointing to the data pages in the clustered index.

![[NonclusteredIndex 1.jpg]]
[Screenshot from 'Data with Baraa'](https://www.youtube.com/watch?v=BxAj3bl00-o&list=PLNcg_FV9n7qZY_2eAtUzEUulNjTJREhQe&index=33)
## Key Points
1. **Separate from the table’s data**
    - The index is stored in its own B-tree structure.
    - The leaf nodes contain **row locators**:
        - In a **heap table** (no clustered index): the locator is a physical pointer (row ID).
        - In a **clustered table**: the locator is the clustered index key (which is then used to find the row).
2. **Multiple allowed**
    - You can have **many** nonclustered indexes on a table, each optimized for different queries.
    - This is unlike clustered indexes, where you can only have one.
3. **Good for lookups**
    - Great for quickly finding rows based on columns that aren’t the clustered key.
    - Can speed up `WHERE`, `JOIN`, and `ORDER BY` operations.
4. **Can include extra columns**
    - You can add **included columns** to the index so the database can return results without having to look up the base table at all — this is called a **covering index**.

## Example Code
-- Create a nonclustered index for fast lookups by CustomerID

`CREATE NONCLUSTERED INDEX IX_Orders_CustomerID`
`ON Orders(CustomerID);`

![[NonclusteredIndexCode.jpg]]
[Screenshot from 'Data with Baraa'](https://www.youtube.com/watch?v=BxAj3bl00-o&list=PLNcg_FV9n7qZY_2eAtUzEUulNjTJREhQe&index=33)

-- Create a nonclustered, composite index
![[CompositeIndexCode.jpg]]
[Screenshot from 'Data with Baraa'](https://www.youtube.com/watch?v=BxAj3bl00-o&list=PLNcg_FV9n7qZY_2eAtUzEUulNjTJREhQe&index=33)
## Leftmost Prefix Rule
The non-clustered index works only if your query filters start from the first column in the index and follow its order.

**If you have an index on:**
INDEX (LastName, FirstName, BirthDate)

**the optimizer can use it for queries that start with:**
- `LastName`
- `LastName, FirstName`
- `LastName, FirstName, BirthDate`
    
**But not for:**
- `FirstName` alone
- `BirthDate` alone
- `FirstName, BirthDate` without `LastName`

**Why?**
Because the index is sorted first by `LastName`, then by `FirstName` within that, then by `BirthDate` within that.  
If you skip the first column in the order, the sorted sequence is broken for searching.
